version: '3.4'
x-build: &build
  context: .
  dockerfile: Dockerfile

x-shared: &common
  build:
    context: .
    dockerfile: Dockerfile
  volumes:
    - .:/src

services:
  base:
    image: egg
    <<: *common

  python:
    &python
    image: egg
    volumes:
      - .:/src
      - /root/.cache/:/root/.cache/
    entrypoint: [ "python" ]